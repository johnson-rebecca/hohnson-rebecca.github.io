<!DOCTYPE html>
<html>
<head>
	<title>JSON & AJAX</title>
<style>
.pincontainer {
	border: 1px solid #333333;
	border-radius:5px;
	padding: 2px;
	margin: 5px;
	display: inline-table;
	width: 350px;
	text-align: center;
	font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
	font-size: 11px;
	font-weight:bold;
}
.insetshadow {
   -moz-box-shadow:    inset 0 0 10px #C0C0C0;
   -webkit-box-shadow: inset 0 0 10px #C0C0C0;
   box-shadow:         inset 0 0 10px #C0C0C0;
}
.imgpin {
	width: 150px;
	text-align: center;
}
</style>
</head>
<body>

<select id="selectUser">
    <option>- Choose a User-</option>
</select>
<input type="button" value="View Christmas Pins" onclick="LoadJSON();"/>
<div id="displayPins">

</div>


<script>
function BlairCraftUser(firstname, lastname, id, boardname)  {
    this.firstname = firstname;
    this.lastname =  lastname;
	this.id = id;
    this.boardname = boardname;
	this.displayname = function() {return this.lastname + ", " + this.firstname;};
  }

var listUsers = [];
listUsers.push(new BlairCraftUser('Cindy', 'Whiting', 'cindywhiting138', 'christmas'));
listUsers.push(new BlairCraftUser('Catherine', 'Poole', 'koneechee', 'christmas-decor'));
listUsers.push(new BlairCraftUser('Rebecca', 'Johnson', 'liralin', 'christmas-ideas'));
listUsers.push(new BlairCraftUser('Sarah', 'Van Wagoner', 'sarahvanwagoner4', 'christmas'));
listUsers.push(new BlairCraftUser('Brittany', 'Morgan', 'brittnkatie', 'christmas-time-is-here'));
listUsers.push(new BlairCraftUser('Hannah', 'Davenport', 'pinned4life', 'christmas'));
listUsers.push(new BlairCraftUser('Emily', 'Baier', 'musicebaier', 'christmas'));

//sort users based on displayname
listUsers.sort(function(a, b) {
    var textA = a.displayname().toUpperCase();
    var textB = b.displayname().toUpperCase();
    return (textA < textB) ? -1 : (textA > textB) ? 1 : 0;
});

//stringify users object
var obj = JSON.stringify(listUsers);
console.log(obj);

var select = document.getElementById("selectUser");

//loop through array to build dropdown using DOM manipulation
for(var i = 0; i < listUsers.length; i++) {
    var el = document.createElement("option");
    el.textContent = listUsers[i].displayname();
    el.value = i;
    select.appendChild(el);
}
 
//build up pin result display
function displayPins(data){
	var html = "";
	for(var i = 0; i < data.length; i++) {
		var obj = data[i];
		var imgObj = obj.images;
		html+="<div class='pincontainer insetshadow'>"
		html += "<img class='imgpin' src='" + obj.images["237x"].url +"'/><br/>";
		html +=		obj.description;		
		html += "</div>";

	}
	return html;
}

function getJSONFile(path, callback) {
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4) {
            if (xhr.status === 200) {
                var data = JSON.parse(xhr.responseText);
                if (callback) callback(data);
            }
        }
    };
    xhr.open('GET', path, true);
    xhr.send(); 
}

function LoadJSON(){
// this requests the file and executes a callback with the parsed result once
//   it is available
//	get selected user
	var e = document.getElementById("selectUser");
	var selIndex = e.options[e.selectedIndex].value;
	var user = listUsers[selIndex].id;
	var board = listUsers[selIndex].boardname;
	var div = document.getElementById('displayPins');
	
	getJSONFile('https://api.pinterest.com/v3/pidgets/boards/' + user  + '/' + board + '/pins/', function(json){
		// do something with your JSON data
		div.innerHTML = displayPins(json.data.pins);
		console.log(json);
	});

}
</script>
</body>
</html> 